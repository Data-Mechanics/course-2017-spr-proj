<html>
<head>
    <title>Obesity and Healthy Locations Map</title>
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="neighborhoods.js"></script>
    <script src="obesity.js"></script>
    <script src="health.js"></script>
</head>

<style>
.bubble {
  stroke: #fff;
}
</style>

<body>
    <script>
    // our code will go here
    var width = 700,
        height = 580;

    var svg = d3.select( "body" )
        .append( "svg" )
        .attr( "width", width )
        .attr( "height", height );

    var g = svg.append( "g" );

    var albersProjection = d3.geo.albers()
        .scale( 190000 )
        .rotate( [71.057,0] )
        .center( [0, 42.313] )
        .translate( [width/2,height/2] );

    var geoPath = d3.geo.path()
        .projection( albersProjection );

    g.selectAll( "path" )
        .data( neighborhoods_json.features )
        .enter()
        .append( "path" )
        .attr( "fill", "#999fa8" )
        .attr( "d", geoPath );

    var obesity = svg.append( "g" );

    obesity.selectAll( "path" )
        .data( obesity_json.features )
        .enter()
        .append( "path" )
        .attr( "fill", "#ffe66b" )
        .attr( "stroke", "#000000" )
        .attr( "d", geoPath );
        // .attr("transform", function(d) { return "translate(" + geoPath.centroid(d) + ")"; })
        // .attr("r", function(d) { return radius(d.properties.percentage); });

    var radius = d3.scale.sqrt()
        .domain([0, 1e6])
        .range([0, 15]);

    // svg.append("g")
    //     .attr("class", "bubble")
    //     .selectAll("path")
    //     .data(obesity_json.features)
    //     .enter().append("circle")
    //     .attr("transform", function(d) { return "translate(" + geoPath.centroid(d) + ")"; })
    //     .attr("r", function(d) { return radius(d.properties.percentage); });


    var health = svg.append( "g" );

    health.selectAll( "path" )
        .data( health_json.features )
        .enter()
        .append( "path" )
        .attr( "fill", "#34773f" )
        .attr( "stroke", "#000000" )
        .attr( "d", geoPath );

    </script>
</body>
</html>